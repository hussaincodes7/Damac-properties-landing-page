"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[855],{962:(t,e,n)=>{var r=n(4594);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var s=function(){return t=function t(e,n){var o=n.previewAdapter;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.viewportPosition=0,this.id=e.id.replace("popup-",""),this.previewAdapter=o;var a=i((0,r.iT)("#link-".concat(this.id)),1);this.openLink=a[0];var l=i((0,r.iT)(this.element,"button.js-popup-close"),1);this.closeButton=l[0],this.videos=(0,r.iT)(this.element,".video"),this.handleKeyEvent=this.handleKeyEvent.bind(this),this.focusableElements=this.getFocusableElements();var u=i(this.focusableElements,1);this.firstFocusableEl=u[0],this.lastFocusableEl=this.focusableElements[this.focusableElements.length-1],this.openPopupButton=document.activeElement,(0,r.q2)(this.openLink,"click",this.open.bind(this)),(0,r.q2)(this.openLink,"keydown",this.open.bind(this)),(0,r.q2)(this.element,"click",this._handleClick.bind(this))},(e=[{key:"close",value:function(){this.element.style.display="none",document.body.classList.remove("modal-on"),/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.scrollTo(0,this.viewportPosition),this.previewAdapter.onClose(),document.removeEventListener("keydown",this.handleKeyEvent),this.videos.forEach((function(t){t.src=""})),this.openPopupButton.focus()}},{key:"open",value:function(t){"keydown"===(t&&t.type)&&13!==t.keyCode&&32!==t.keyCode||(/iPad|iPhone|iPod/.test(navigator.userAgent)&&(this.viewportPosition=window.pageYOffset,document.body.style.top="-".concat(this.viewportPosition,"px")),this.element.style.display="block",this.element.setAttribute("tabIndex","-1"),document.body.classList.add("modal-on"),this.openPopupButton=document.activeElement,this.previewAdapter.onOpen(),this.videos.forEach((function(t){t.src=t.getAttribute("data-src")})),this.element.focus(),document.addEventListener("keydown",this.handleKeyEvent))}},{key:"_handleClick",value:function(t){var e=t.target;e&&this.closeButton&&((0,r.cK)(e,".lightbox-dim")||this.closeButton.contains(e))&&this.close()}},{key:"handleKeyEvent",value:function(t){switch(t.keyCode){case 27:this.closeButton&&this.close();break;case 9:this.handleTabKeyDown(t)}}},{key:"handleTabKeyDown",value:function(t){1!==this.focusableElements.length?t.shiftKey?this.handleBackwardTab(t):this.handleForwardTab(t):t.preventDefault()}},{key:"getFocusableElements",value:function(){var t=this.element.querySelectorAll('a[href],a.btn, area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),e=[];return Array.prototype.push.apply(e,t),e}},{key:"handleBackwardTab",value:function(t){document.activeElement===this.firstFocusableEl&&(t.preventDefault(),this.lastFocusableEl.focus())}},{key:"handleForwardTab",value:function(t){document.activeElement===this.lastFocusableEl&&(t.preventDefault(),this.firstFocusableEl.focus())}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var h=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.id=this._parseElementHtmlId()},(e=[{key:"isPreview",value:function(){return"object"===c(window.previewMode)||r._5.getPageData().preview}},{key:"onOpen",value:function(){var t=this.element.querySelector(".lightbox-content"),e=parseInt(t.style.marginTop,10)||0,n=t.clientHeight,r=t.offsetHeight,o=t.scrollHeight,i=t.clientWidth,a=t.offsetWidth,l=t.scrollWidth,u=t.offsetLeft,s=t.offsetTop,c={id:this.id,marginTop:e,dimensions:{clientHeight:n,offsetHeight:r,scrollHeight:o,clientWidth:i,offsetWidth:a,scrollWidth:l},position:{offsetLeft:u,offsetTop:s}};this._dispatchCustomEvent("init",{data:c}),this._dispatchCustomEvent("show",{data:c}),this._dispatchCustomEvent("shown",{data:c})}},{key:"onClose",value:function(){this._dispatchCustomEvent("hide",{id:this.id})}},{key:"_dispatchCustomEvent",value:function(t,e){var n=new CustomEvent("preview.popup.".concat(t),{detail:e});window.dispatchEvent(n)}},{key:"_parseElementHtmlId",value:function(){var t=this.element.id;return"popup-page-popup"===t?"page-popup":t.split("-")[1]}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var b=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.id=this._parseElementHtmlId()},(e=[{key:"onOpen",value:function(){var t=this.element.querySelector(".lightbox-content"),e=parseInt(t.style.marginTop,10)||0,n=t.clientHeight,r=t.offsetHeight,o=t.scrollHeight,i=t.clientWidth,a=t.offsetWidth,l=t.scrollWidth,u={id:this.id,marginTop:e,dimensions:{clientHeight:n,offsetHeight:r,scrollHeight:o,clientWidth:i,offsetWidth:a,scrollWidth:l}};this._dispatchCustomEvent("init",{data:u}),this._dispatchCustomEvent("show",{data:u}),this._dispatchCustomEvent("shown",{data:u})}},{key:"onClose",value:function(){this._dispatchCustomEvent("hide",{id:this.id})}},{key:"_dispatchCustomEvent",value:function(t,e){var n=new CustomEvent("preview.popup.".concat(t),{detail:e});window.dispatchEvent(n)}},{key:"_parseElementHtmlId",value:function(){var t=this.element.id;return function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(/p-[a-z]-([a-z0-9]+)/gim.exec(t),2)[1]}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var P=/p-([a-z])-([a-z0-9]+)/gim,j=function(){return t=function t(e,n){var r=n.previewAdapter;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.previewAdapter=r;var o=this.parseElementHtmlId(),i=o.variationId,a=o.popupId;this.id=a,this.variationId=i,new MutationObserver(this._onNodeChange.bind(this)).observe(this.element,{attributes:!0})},(e=[{key:"close",value:function(){var t="#p-".concat(this.variationId,"-").concat(this.id," .lightbox-dim"),e=g((0,r.iT)(t),1)[0];e&&e.click()}},{key:"open",value:function(){var t="#link-".concat(this.id),e=g((0,r.iT)(t),1)[0];e&&e.click()}},{key:"parseElementHtmlId",value:function(){var t=this.element.id,e=g(P.exec(t),3);return{variationId:e[1],popupId:e[2]}}},{key:"_onNodeChange",value:function(t){var e=t.find((function(t){return"hidden"===t.attributeName}));e&&(e.target.hidden?this.previewAdapter.onClose():this.previewAdapter.onOpen())}}])&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function T(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"init",value:function(){var e=t.getPopups();r.l7.get().on("closePopup",(function(t){var n=t.popupId;if(n){var r=e.find((function(t){return t.id===n}));r&&r.close()}})),r.l7.get().on("openPopup",(function(t){var n=t.popupId;if(n){var r=e.find((function(t){return t.id===n}));r&&r.open()}}))}},{key:"getPopups",value:function(){var e=[],n=(0,r.jB)()?"amp-lightbox":"div.popup";return(0,r.iT)(n).forEach((function(n){e.push(t.createPopupInstance(n))})),e}},{key:"createPopupInstance",value:function(t){if((0,r.jB)()){var e=new b(t);return new j(t,{previewAdapter:e})}var n=new h(t);return new s(t,{previewAdapter:n})}},{key:"createPopupPreviewAdapter",value:function(t){return(0,r.jB)()?new b(t):new h(t)}}],null&&C(e.prototype,null),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();(0,r.OR)((function(){I.init(),(0,r.jS)("Popup")}))}},t=>{t(t.s=962)}]);